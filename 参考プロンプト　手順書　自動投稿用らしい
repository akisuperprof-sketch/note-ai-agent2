https://note.com/so9/n/n2a77ba112620

抽選キャンペーンページ
キーワードやクリエイターで検索


メニュー
 投稿

見出し画像
GoogleAntigravityでNoteへの自動投稿でリッチテキスト（見出し・引用）を正しく反映させるまでの試行錯誤

3
そうきゅー【製造業のリビルトログ】
そうきゅー【製造業のリビルトログ】
2025年11月29日 22:17 フォローする
はじめに
GoogleAntigravityを使用してNoteへの記事投稿を自動化する際、
見出しや引用（Quote）などのリッチテキストフォーマットを正しく反映させるのに苦労しました。
結局3時間ほどかかりました。
なので、その試行錯誤の過程と解決策をまとめました。
ぜひ参考にしてみなさんもNoteへの自動投稿を試みてください！

ブログの最後にコピペできるプロンプト文を掲載しました。
ぜひ使ってください。

また、単にNoteの自動投稿ができるようになった情報だけでなく、
AIエージェントの機能を上手に活用して解決策を見つけたという情報も掲載してるのでぜひご覧ください。


目次
はじめに
直面した課題
解決への道のり
試行1：コピペ（Ctrl+C / Ctrl+V）のシミュレーション
試行2：Markdown記法の入力シミュレーション（Type & Trigger）
試行3：insertHTML コマンドの使用（解決策）
まとめ
Note自動投稿用プロンプト文(コピペOK)
直面した課題
Noteのエディタは、単純にテキストを流し込むだけでは、Markdownのような記法（# や >）が自動的に変換されず、そのままのテキストとして表示されてしまいます。

「あるべき姿」として、見出しは見出しとして、
引用は引用ブロックとして正しく表示させる必要がありました。

解決への道のり
試行1：コピペ（Ctrl+C / Ctrl+V）のシミュレーション
人間がやるのと同じように、

「テキストをクリップボードにコピー」→「エディタ上でCtrl+V」

という操作を自動化しようとしました。Noteのエディタはペーストされたテキストを解析してフォーマットを適用する機能があるため、これが最も確実だと思われました。

私が指示したプロンプト文

Note記事への投稿を”5. Use execute_browser_javascript with document.execCommand('insertText', ...)...”で対応すると正しく入力できません。\n1. コピーしたい該当箇所をCtrl+Cでコピーしてクリップボードにコピー\n2. Ctrl+Vで貼り付け\n\nこの手順で実施してください。私がこの手順でやったところ成功しました\n

copy
結果：失敗

ブラウザ自動化ツール（Playwright等）の制約により、OSレベルのクリップボード操作や、Webページ上でのペースト操作が安定して動作しませんでした。セキュリティ制限などでブロックされているのかもしれません。そのため断念して次の案を試みました。

試行2：Markdown記法の入力シミュレーション（Type & Trigger）
次に、エディタ上で「# （シャープ＋スペース）」や「> （大なり＋スペース）」をキーボード入力としてシミュレーションし、Noteの入力補完機能をトリガーさせる方法を試しました。

私が指示したプロンプト文

修正方法は間違っています。スクリーンショット画像を見ながら正しい方法を考えてください。\n\n1枚目：現状（AIエージェント実施）\n2枚目：あるべき姿（私が実施）\n

copy


画像
結果：失敗

Markdownのトリガー記号（#など）は入力できましたが、その後に続く日本語テキストの入力で問題が発生しました。自動化ツール経由での日本語入力（IME未介在の直接入力）がエディタと相性が悪く、文字化けや入力エラーが多発しました。

試行3：insertHTML コマンドの使用（解決策）
最終的にたどり着いたのが、ブラウザのJavaScript実行機能を使って、document.execCommand('insertHTML', ...) を実行する方法です。これにより、整形済みのHTMLタグを直接エディタに挿入します。

私が指示したプロンプト文

修正が間違ってます。スクリーンショット画像を見てください\n\n自分で”2枚目：あるべき姿（私が実施）”になるようにloopを回してください。ただし、3回loopも回しても完了しない場合はストップしてreportしてください\n\n前回はinsertH1などの入力の許可をconfirmしましたが、AIエージェントが自律的に実施できるように”許可”\nします\n

copy
実行したコード例:

const htmlContent = `\n  <h1>記事のタイトル</h1>\n  <p>ここに本文が入ります。</p>\n  <blockquote>\n    これは引用ブロックです。正しくフォーマットされます。\n  </blockquote>\n`;\n\ndocument.execCommand('insertHTML', false, htmlContent);\n

copy
結果：成功

この方法であれば、見出し（h1, h2）や引用（blockquote）、リスト（ul/li）などが、Noteのエディタ上で完璧に再現されました。Noteのエディタ（ProseMirrorベース）がHTMLタグを解釈し、適切な内部フォーマットに変換してくれたためです。

この解決策は私が考えたのではなく、geminiが提案してくれました。私は今回あるべき姿を示し、具体的な手段はAIエージェントに考えさせることをした結果、解決することができました。この考え方はAIエージェントならではだと思います。AIエージェント丸投げでは成功しなかったですが、人間がフィードバックを繰り返し、二人三脚で進めることで解決することができました。

プロンプト全文は最後に掲載しています。

まとめ
Noteへの自動投稿でフォーマットをこだわりたい場合は、ユーザー操作の模倣（入力やペースト）よりも、insertHTML を使ってHTMLとして直接流し込むのが最も確実で近道でした。

Note自動投稿用プロンプト文(コピペOK)
Noteの自分のホームページにログインした状態にしてから、下記プロンプト文を実行してください。


# Noteへの自動投稿プロトコル

## 0. 概要
このドキュメントは、AIエージェントがNoteにブログ記事を自動投稿するための手順書です。
最終的な記事の投稿はユーザーの最終確認が必要との思想から下書き保存までにとどめます。

## 1. アクセスとナビゲーション
1.  **ホームページを開く**: [https://note.com/](https://note.com/) にアクセスします。
2.  **ログイン確認**: ユーザーがログインしていることを確認します。
3.  **投稿を開始**:
    - 「投稿」ボタン（通常は右上にあります）をクリックします。
    - ドロップダウンメニューから「テキスト」を選択します。
4.  **エディタの待機**: エディタページ（URLが `https://editor.note.com/...` で始まる）が完全に読み込まれるのを確認します。

## 2. コンテンツ挿入戦略
**重要**: フォーマット適用に単純なキーボード入力シミュレーションを使用しないでください。Noteのエディタはリッチテキストに対して特別な処理が必要です。
**手法**: `execute_browser_javascript` を介して `document.execCommand('insertHTML', ...)` を使用します。

### 手順:
1.  **エディタにフォーカス**: エディタの中央（例: X:500, Y:500）をクリックします。
2.  **コンテンツのクリア**: `Control+A` を押してから `Delete` を押し、既存のテキストを削除します。
3.  **コンテンツの準備**:
    - 提供されたMarkdownの記事本文をHTMLに変換します。
    - マッピング:
        - `# 見出し` -> `<h1>見出し</h1>`
        - `## 見出し` -> `<h2>見出し</h2>`
        - `> 引用` -> `<blockquote>引用</blockquote>`
        - `- リスト` -> `<ul><li>リスト</li></ul>`
        - `テキスト` -> `<p>テキスト</p>`
4.  **挿入の実行**:
    以下のJavaScriptを実行します（`[HTML_CONTENT]` を変換後のHTMLに置き換えてください）。
    **重要**: `execute_browser_javascript` ツール経由で実行する場合、HTML文字列内に改行コード（`\n`）が含まれていると `SyntaxError` が発生するケースがあります。
    **対策**: HTMLは**必ず1行に整形（minify）するか、改行を含まないように文字列連結**してください。テンプレートリテラル（` `）で改行を含めることも避けてください。

    ```javascript
    // 推奨: 改行を含まない1行の文字列、または文字列連結を使用
    const htmlContent = '<h1>見出し</h1><p>本文...</p>' + 
                        '<p>次の段落...</p>';
    document.execCommand('insertHTML', false, htmlContent);
    ```

    または（単純なケース）:
    ```javascript
    const htmlContent = `[HTML_CONTENT]`;
    document.execCommand('insertHTML', false, htmlContent);
    ```

## 3. 仕上げ
1.  **下書き保存**: 「下書き保存」ボタンをクリックします。
2.  **報告**: 下書きが作成されたことをユーザーに報告します。

copy
いいなと思ったら応援しよう！

チップで応援する
#生成AI
#Gemini
#自動投稿
#GoogleAntigravity

3




そうきゅー【製造業のリビルトログ】
そうきゅー【製造業のリビルトログ】

フォロー
ものづくり経験10年のそうきゅーが30代から AIエンジニア兼DX推進担当へキャリアシフトしていく過程を発信します。
一緒にものづくり×AIを盛り上げていきましょう。Amazonのアソシエイトとして、当メディアは適格販売により収入を得ています。
人気記事
プログラミング超初心者が学習初期にやってよかったこと3選

4

累計10,000ビュー達成までの推移をExcelでまとめてみた

3

これが未来のものづくり！生成AIを活用したエンジニアリングの最前線！

3

もっとみる
前の記事
Geminiを新米夫婦の子育てパーソナルコーチに！ - 母乳育児相談ログ

次の記事
AIエージェントから的確な解決策を引き出すためのアプローチ ～Note自動投稿の事例から～

コメント

コメントする
買うたび 抽選 ※条件・上限あり ＼note クリエイター感謝祭ポイントバックキャンペーン／最大全額もどってくる！ 12.1 月〜1.14 水 まで
こちらもおすすめ

note 自動投稿 AI ボット
hendra_plus080
11日前

21



[全自動投稿]noteをバイブコーディングで自動化してみた。
¥1,500
東雲莉鶴
8日前

6



【note初心者向け】まだ手作業で直してる？AI文章をnoteに一発で綺麗に貼る「経由」テク
こみ｜AIと「思考」する実践者
1か月前

15



【ソースコード公開】GeminiとNoteの非公開APIをゴニョゴニョして、note執筆を「完全自動化」する自作ツールを作った話
¥980〜
割引あり
coffin299
1か月前

1



note自動化で読まれる記事作成を効率化｜Python×ChatGPTで実践する手順
¥1,900
AI好きの人
3週間前

5



【メチャ楽】ObsidianからnoteへAI自動投稿！システム構築ステップガイド
¥2,980
【AIで可能性を広げる】しまゆず | AIクリエイター
12日前

8



「AIの文章はつまらない」と言わせない。執筆時間を1/5にして“人間味”を宿す「3段構え」プロンプト術
¥350
izunasan
11日前




超・多角思考プロンプト(そのままコピペ可)
てるちょこ
5日前

1



Google Antigravity（アンチグラビティー）を使ってコンテンツ作成フロー（Note → X投稿作成 → メルマガ作成）を自動化・効率化する方法
脱・プログラミング | AI研究所 | マツケン社長
4週間前

8



noteのサムネ画像をNano Banana Proで作る方法
ビット @AI実践家
1か月前

8



Geminiと思考実験ログ Vol.2｜コピペで記事完成！AIとの会話をNoteに最適化する「Owl's Transcript」開発記録
オートラ先生の耳鼻科ひみつ基地
5日前

3



noter ならすぐ出来る生成AIの使い方
kzn
13日前

41



note 自動投稿ツール (notepost)
Akira Kozakai
1か月前

1



Antigravityで「書く」を設計する - note執筆の新しい標準
仲村 トウ｜AIと書くしくみ
1か月前

22



Notion AIに記事を書かせてみた結果がすごかった【パーソナライズ活用術】
uratake
1か月前

2



◆◆◆初めてnote【noteの投稿をどう作るか】50投稿しての経験から実践をお教えします◆◆◆
¥500
昭和からの宅建士
1か月前

5



【n8nとGASでX完全自動投稿！④】n8nでX（旧Twitter）に自動投稿する方法｜ついに完全自動化へ
AI収益化＠ゼロからスタート
3週間前




noteメイク、AIテクニックス
¥100
platypus2000jp
6日前

3



【初心者OK】Note記事の自動生成システム｜make.com×Gemini API完全ガイド
あるふ | ガジェット大好きエンジニア
3週間前

3



【完全自動化】YouTube文字起こしからNote記事＆グラレコ画像を生成するツールを自作してみた
れん学長のAIビジネスラボ
2週間前

26



【コピペで時短】Geminiがnoteに生成するコードヘッダーを自動削除するブラウザ拡張機能の作り方
藍月乃音（あいつき）AI生活で世界はもっと面白くなる。日常✖語学✖コード=未来のコンテンツ
1か月前

5



note超初心者が生成AI（Gemini）を使って、記事作成〜アプリ自作した実践ログ
しんた | アラフィフAI実践記
3週間前

14



AIと共創するブログ記事作成マニュアル
モーレア
2週間前

8



【非エンジニアだよ】AIでアプリを作った経緯をAIでnoteにまとめられるか
おむろがわ｜ゆるめのフリー1級FP技能士
1か月前

7



【時短革命】「書くのやめました」現役エンジニアが構築した、AIに"人間味"を実装する全自動執筆パイプラインでnoteを収益化する方法【プロンプト公開】
¥500
あまんちゅ
3週間前

4



【完全版】AI × note執筆の“自動化パッケージ”― テーマ選定から構成、本文生成、タイトル、内部リンクまで ―note執筆を“ほぼ全自動”にする仕組みを公開
ぼっちGPT
3週間前




note執筆が5分で終わる。プロの脳内を再現する「文章生成プロンプト」公開します
¥300
MITSUYAyyy
4週間前

3



「いい記事なのに読まれない！」を防ぐ。nanobananaでnote専用の「記事内バナー職人AI」を開発してみた
¥300
popopo @生成AI×仕事•学習
2週間前

4



【損してない？】内容はいいのに「読まれない」記事の共通点。AIに「装飾」まで丸投げして、滞在時間を2倍にする裏技
¥100
めんどくさがり大学生マグ｜AIに全任せして稼ぐ
2週間前

4



過去の記事をXで自動シェアするボット作成 ー 初心者向解説付き・冬休みの課題にどうぞ (WordPressでも)
シサク
2週間前

6



AIでnote投稿補助をしてもらえるマイGPTを作成しました
hmk10
3週間前




300円noteを書くためのプロンプト集（全30個）
¥300
牧瀬燎二
1か月前




note記事の構成を毎日苦しくなく生成する１０のプロンプト
¥500
ただた
1か月前

5



交流会で大活躍！自作したデジタル名刺の魅力とその作り方
ありたん
1年前

70



キャンプ練習場campass秋葉原『キャンプ×防災』イベントにワークショップ出展レポート
kids_bushcraft
1年前

29



数年越しの挑戦、WordPressからヘッドレスCMS移行のプロセスを振り返る〜デブサミウーマンで登壇しました〜
Kurashicom Tech Blog
6か月前

36



3






noteプレミアム
note pro
よくある質問・noteの使い方
プライバシー
クリエイターへのお問い合わせ
フィードバック
ご利用規約
通常ポイント利用特約
加盟店規約
資⾦決済法に基づく表⽰
特商法表記
投資情報の免責事項
GoogleAntigravityでNoteへの自動投稿でリッチテキスト（見出し・引用）を正しく反映させるまでの試行錯誤｜そうきゅー【製造業のリビルトログ】